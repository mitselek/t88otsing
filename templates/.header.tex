% LaTeX header file for pandoc PDF conversion
% Customizes heading spacing, list formatting, and footer metadata
% Usage: pandoc INPUT.md -o OUTPUT.pdf --pdf-engine=xelatex -H .header.tex
% 
% Custom spacing for headings
\usepackage{titlesec}

% Section spacing: {left}{before}{after}
\titlespacing*{\section}{0pt}{36pt plus 4pt minus 2pt}{12pt plus 2pt minus 2pt}
\titlespacing*{\subsection}{0pt}{32pt plus 4pt minus 2pt}{8pt plus 2pt minus 2pt}
\titlespacing*{\subsubsection}{0pt}{24pt plus 4pt minus 2pt}{6pt plus 2pt minus 2pt}

% Prevent orphans and widows (single lines at page breaks)
\widowpenalty=10000  % Prevent last line of paragraph at top of page
\clubpenalty=10000   % Prevent first line of paragraph at bottom of page
\raggedbottom        % Allow variable page height to avoid awkward spacing

% Prevent headings from appearing alone at the bottom of a page
% (Ensures at least 2 lines of content follow a heading before a page break)
\usepackage{needspace}
% Automatically apply needspace before section headings
\let\oldsection\section
\renewcommand{\section}[1]{\needspace{4\baselineskip}\oldsection{#1}}
\let\oldsubsection\subsection
\renewcommand{\subsection}[1]{\needspace{3\baselineskip}\oldsubsection{#1}}
\let\oldsubsubsection\subsubsection
\renewcommand{\subsubsection}[1]{\needspace{2\baselineskip}\oldsubsubsection{#1}}

% Table styling - no striping to maintain clean borders
% (Striped rows cause color overflow beyond table borders)
\usepackage[table]{xcolor}
\usepackage{colortbl}

% Add spacing above level 1 (top-level) list items for better readability
\usepackage{enumitem}
% topsep: space above and below list (when list is alone in paragraph)
% partopsep: extra space added to topsep when the environment starts a new paragraph
% itemsep: space between items
% parsep: space between paragraphs within an item
\setlist[enumerate,1]{topsep=1pt, partopsep=0pt, itemsep=0pt, parsep=0pt}
\setlist[itemize,1]{topsep=1pt, partopsep=0pt, itemsep=0pt, parsep=0pt}

% Configure footer with document metadata
\usepackage{fancyhdr}
\usepackage{lastpage}  % For total page count
\pagestyle{fancy}
\fancyhf{} % Clear all headers and footers

% Define default values for footer metadata
\providecommand{\hasfooter}{false}
\providecommand{\docid}{}
\providecommand{\docversion}{}
\providecommand{\docdate}{}
\providecommand{\docauthor}{}

% Left footer: Document ID and Author (if available)
\fancyfoot[L]{\small \ifx\docid\empty\docauthor\else\docid\ | \docauthor\fi}
% Center footer: Page number with total pages (e.g., 5/15)
\fancyfoot[C]{\small \thepage/\pageref{LastPage}}
% Right footer: Version and Date (if available)
\fancyfoot[R]{\small \ifx\docversion\empty\docdate\else v\docversion\ifx\docdate\empty\else\ | \fi\docdate\fi}

% Remove header line
\renewcommand{\headrulewidth}{0pt}
% Keep footer line (optional - can set to 0pt to remove)
\renewcommand{\footrulewidth}{0.4pt}
